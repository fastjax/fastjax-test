# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: UtohkWur01+EUlVkZBY7hA57t9+jKqQC5EIa85iQh7zlyxYndpyrPHEW8Xa5hcH5y2vGcHvBW9gt5ZQvXx3gRxeHlvGcUBjxo0dDlw9ocYtuQQLJFBQ4Y2nq3PqJFXMc4I9PRfl61KB45kEwNYlmGmPQj9+rybfdjx8y96TZXxUo+hI1fV3KqZgApZm093wMPd8tLqlmJSZd76AB8/n57V/mbigqJoPjsCn1iU3S7A8uTV/E3+RDyjdBLYSkL9KmARj9inbBa1x211i8Iib8dpfnr6ez2jygL9nynxA3RNybcYYKap+pd7InaLV//enhaEAIyTZFdemIPDIHy4OrROeTT5X0trSbySIclH+wZ2BMQXtsoOSOseNIUIfuHqzXcpJt9rXbKKYto17fUgYiKhiKY7Ket8i4fKcXx/KYibe+W7jnm8Q8uDvGAw14IFHRZj5rq8mZ057dULqBAnOYinItJJdiP5GsPPSRTTmObjZHNnaX03/VmldFQjH0qvH6zh2sNVKyvZTeli8pgEbJaUNMqC7XJfox5XcaRqGYxkJKUZrQEAUDyOCdiW43MfU3W4bqPMrRLj3+RQ0rCwbUv6X46Xi0FyiKdZ54/eFQWUbIJ1e/9vcT6NryvV32Az8QVde7vPyE0RviufY43uN/yxg5B4a+r+e3hgD4y9tRMc8=
  - secure: Pjb63u1vvGV8WBytcjXyAGL/Mqz9vN+hMoLb9GMh+Qi5mXuXELxFvc6C0rFOMzoJi2XGyTXXE422HssuMtVuc4oWUUIKW7Rui70bGCtGMbJSDyE8ZlB5I9d6xcA4bgdcsmb6WoZAtP3DW0+37arS7hwbcO/nK4MQ3iux7FncxxOWIpGj7MsQdmESlbzb6dBCk/wwzVwDJ87LPl3SPc5U9aqi/qeKdGIt3RxfHoF8CfxbhV1Iz/s7+HliNPl4oSaaoT7DwVQHyjJuUQ73xGPiQ1QXZ2pHSmNc7YlcS2Tmc56lU5iKZyYCtZasq+fp2G5zPMnIwfWIQhIPd0j5D8AhbElqtbbNDlKzsHY/7gtvoemU5Te+jQV7Qe1OAnykQDQEN9tFquMYmHwOUHWT013TxPifUPR+EF7+Q0wclm0NFb9iuiIJeAmsJjyRifKeq+CtdvwxA5H7xRYVHwTaFmpS9cXnK4FdxiQX7HPriX5HDVw2y8b9QC9WyZdGGqDHZR4dnMVlo/e3hpl0h7Cs0z68+Zq9YsQUpnBKQh2p2TXZXAPChsHRvDuzf6m8cJiCuFqZagi187XYpOIf5er5iSsMXdqhyaplQMiz1XtNd2nZ9VbZcJ3q2jWJT9PWWv2zkPYAyGjJV95oeTmAFg2kYg1qQ/V1rgcDa3yz0z+se321lBw=
  - secure: FHyYZaQGiJjS+/sPGuYBVDDQ50+HFoDJTIOTc0nGQOrcyaaH/aP0hlq/NYjEMwutZ1raOegZ6Nt0wmI3aYTiw8BLnPkWuzxplsX+wJDUt9bnlxHSqL49VLyx2O/ELDQwj3JV9zPIZuVHT5C0lJnov70VAKuwR7bvTAgkpPiXRqTAkJxdXIxaESxmA5/m/r0ODN2ePcGEqQyQOkQMKZD28VFGV4q/WycFooP/pcgrV/K4fZkdDLHPXPkr3jmXQMmhI5+4ivk3YxtdxrJcmRoFSR7vGiuv/6F1NRWoRNW884q4MJWeP9SmlkEWGQLaO/HvkVhOE0GP79+EFwU+WkHuo0y92YZJBg0YRp5cWlSLkzipVrLsFNwUifYS25vx8lNCRanLtCxY8WDUXxO706EGp1A2+97pBdh9TmXxWl8+X1591RKtVJwL1XI4Ohs/ogdbMYjrBqWcg8oz+VeVHzvbhrW0uhNw51CtWWZFmdoUoAEX6MIgHxWcUc/ABOJMCWSv9/LNjoiWmngcFYJKAGXISnruOzqamB/PCMRFyajEKN2pLMx5b6g6IzELp9xBBswiZxkEDH9kEwuINilzwonSoymvvVM2JHi+0JuLHtXAcLNjIWFXXCTLoqDtGC17Y1Y1iihyRT7XE4aJxtXmwQJ9NvSvcBqSu8rgKPkbAyvDrCk=
  - secure: U8JGntvSMPpWIcMXn/34gxWuiXXjH7kqaJ0BWKYDnRMaBbhQ5/rgCiqTtbrxJeW6AAjAopQKYQjbjmyawIjifa3zmRZPGC0qyRdUQfxLAlhmE2EmGMNaEpjBP/D+OKA0UVs52FuChbhJoYxjwKbvwVjlfRuavNxdQ6mVOrR1AUrWmBsGIpUVechfXcX+L5HEWhuHbIx3gByp4Li6jcN2b7VVwbjEGm2T3IVlwRKw93YJiSwUhpy5hHPa6IEr2BOjIgWvNsZcAPHhWqojbIn+1Hr2TFvj+mM4vI7nYIPd1UdIvpLYDoytXbPqFpFl7DlpmkCrWHnhjAPScwidb3ZK+T+5RwNQOExH1tZUfUCEUzZegHX4nAmTtM6Q5qSj/jBZ7U9ckTxDeB7iTUA4Dl9ssgZmwT4K4oTFl/2lVKm3g0sLNVA7hfhD0MwTFIbAfRsikFPrng17CAQ7A20i/fRU/xj79zqiBT9/j19eFT070pJRQYlMYEMVOLdj++caKtofiiXFJb9oXr9M32+yDSOs832+5rgcA5YH/Srdvsv+WLiU/2kdUG/gIbMeFOAV4tTkfKGYOS1MLYP9bLjzGpLen2NYt4bxlwR3CEE+xJHIZfBSkk8NcwN+qwif8sWKS7dV4naNnW+VzUifLLmLptf5OEu15b9h8eJCiSKyyDgX0eQ=
  - secure: ZqKEgsPbMCRC0b1y0W1Lhqfdq5i22qDPABrhB+BWteqNRRI7QxduM/O4l7X3oDGwBWJf/30eS4lSnTuISdixDSKk7sPxFja3h7vxN5CNNEsooFmYHl4mfLlL/ooTQZD7g6KuG9puYCqc4T9uerOYFtwhDMXkhvLaaugzJH91NgX+BiHO5i6zM3vO45MPGLvHdCrjN/w0TUDgPCXpkoE5z5a8bjhFaHWx8BRymPjSO/HNT7g9bdbtOd0715IkGDoCrhZIIn2TTVki9geR26jTGLpt15+VQ9JC5R0jeCx3/iBdA845Dv+n+Dmf+tJXBU7bUIHPJp83eddmDIe3f8d3Rt+UcBZDwchnMV1b/nNu29778zOZh0ku1oN4gTae08bjfqvnUtBabgVCgTN3Ivm4scFp6977O1la7Uf/cEUWTyOKFU8vObFlzzZT+DTYDT2lPZ68m3VbgnMHkU17m4GD55o3aB5j2HEXiJ7cdzYfpd5ZHEnIGTZTH+DChzP858NMQKMGBpClqM4zIDNOW9BSWdHfVH7cHETzXN4Tmm4bnKZC3N1/qCol+NdCb7VCCfIzKBS5CKKs6aog/Jh1+DwtcPWVYCslfki5juj+52cU3OGNIG/UAr7tS980jZf5S/+t1L+sppwoy62iwkLE2IlnKIeFW7D27oTgg/dE601Nf6A=
  - secure: MccEf7AD3LjMS74GsnjzmUpJrVakzDvZZGKQhGe/KurcgWYw1AFcSnCje4wFl9cHglNnFv+1rwtk92fnKZrApTkx+wKPvIe0kRsU43KJlGio0fFOtfT9IXhlNderzQVS4kLL7xkyw3eKcrxBb2EmU6k1wQGgL/h3CtMvEoQIclAVirXGuXDcaebU62Y/EJIRDfAxbdrYPrZLwmcqZBT3PG9DByngNSpoUr7hh5uSpzkrL/zOHufdbX3D+cdQcf7Le7J80MkqeBPiKgk2CXTdpOKxCzc4EYfHxsSsxsgwu72LDlvaMm4/h8E9RD0I5g9uKYCq9SIiowoz5auDLlCeOzIjLJJ62U8H4B3kwYbNpsqacBEe6KeNgdyOUqxtsldN+UJPT+icdyaw5a6MOolXPT1C97813GVImbP9Z6rhlhOSymxFe0moEaQdAzezWhn+1KScRvGAf877t20sKoYRn4c07s5H7nNat3XxDbSapqtAST24viaqjugzYb8OQPz4XA0oX6Si/VfV3NxeK45sblRlaIolNs+DTg+1cjQ8O+8azWZ2D0YmXBYDpdPJoHBYFy1etDSyiXgmiVgJVNrkUXykTpikOzNAZrpHf2cqVJZrQJQet1H+L4kfHCtVPEgolrk+Q8iZWahUv1ORB1pzjzSP0WVW1GnkJGXcRWHPV0U=
  - secure: C4+UiMDGC5ZaMBap7VVeuakKBukcEskFrOPIyU19OOE7esFsNvbmFewwx5YcrLyYRIaMUO32lgf6BS7o37BhjI8o0Ds6NH8pYCSJRc2U9a/51h/3wPjNj6nn2Wq+CRpHVLHfNsA1vuW2S8BRFUaRgSIUnzNtzpMfwSLjJdg4IYO/cBJ1Fx0xqPbYMDH1KzLFwQqrLhvPQgB5rOO+0kJ1dE5GY4U1psKxhEEe+YcpS80NPWM/gK72irdGEPajBC3YdI5oSi1oVco0KKcCWGptYeh1kXLhEby4lpBsKdEUplRKjb9gpmr6Et8LK7ZQ0IVF7dt4IyOefJi/nVYSDbQANW2JBIKNu4shvR9n4rbiDhxH+9DTBJW5/7eaGZuCs3sGAUeHRSQmhUlS2SV0dyPO2kOkgzazMJ6pOwWVeXd1jnWnK1KPoGlmcw6u3XWHMimRN2vZLvUqDHTC/hgxSVzoKUhjTsix6Qo2c3UDaEOyOz4z08ZmzM4z5fIBiuJhJICQAWnDVKb+fbwzmZXLl/IbHLVfhciTTg1s7unf6H9kqBAKs+Xcj7rz8LTb9C9P9Wy5dj789R7GRCphYvyU+49wyq1L8PTACKhBpHSsTx+JgGKebOF3ckQGcHmnlz76vCABY53lTCCdwe2PJjoUd8z7PBZQbh+3UDgzS6PUzxW5LFg=
